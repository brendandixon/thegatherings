%section
  .row
    .small-12.columns
      %h2= t(:title, scope: [:communities, :report], name: @community.name)

      = render partial: 'shared/spacer'
      .row
        .small-12.columns
          %ul.tabs{id: :tabs, data: {tabs: true}}
            - @chart_data.each_with_index do |category, i|
              %li{class: i == 0 ? 'tabs-title is-active' : 'tabs-title'}
                = link_to category[:plural], "##{category[:container]}"

      .row
        .small-12.columns
          .tabs-content{data: {tabs_content: "tabs"}}
            - @chart_data.each_with_index do |category, i|
              %div{id: category[:container], class: i == 0 ? 'tabs-panel is-active' : 'tabs-panel'}
                .row
                  .small-12.columns
                    %canvas{id: "#{category[:container]}_chart", class: 'chart'}

      = render partial: 'shared/spacer'
      .row
        .small-4.columns
          -# .actions.left
          -#   = link_to t(:title, scope:[:gatherings, :new]), new_community_gathering_path(@community), class: 'button small'
        .small-6.columns.end
          .float-right
            = link_to t(:title, scope: [:gatherings]), community_path(@community)

= render template: 'shared/bind_charts'
:javascript
  theGatherings.Charts.gaps_data = #{raw @chart_data.to_json}
